<div class="page"
  *transloco="let t;read:'displayHomePage';">
  <app-profile-top-bar></app-profile-top-bar>
  <div class="display-home">
    <app-home-category
      categoryName="{{t('myEvents')}}"
      (onSeeAllClicked)="goToDisplayEvents()">
        <div
        class="events__container">
        @defer (when events()) {
          @for (event of events(); track event) {
            <app-event-card
              [event]="event"
              [showActions]="false">
            </app-event-card>
          }
          @if (!events()?.length) {
            <app-simple-empty></app-simple-empty>
          }
        } @placeholder (minimum 1000ms) {
          <app-event-card-placeholder
            [showActions]="false">
          </app-event-card-placeholder>
        }
        </div>
    </app-home-category>
    <mat-divider></mat-divider>
    <app-home-category
      categoryName="{{t('myMealsOfTheDay')}}"
      (onSeeAllClicked)="goToDisplayMeals()">
      @if (this.mealsByMealKinds$ | async; as mealsByMealKinds) {
          @for (mealsByMealKind of mealsByMealKinds; track mealsByMealKind) {
            <div class="meals-by-meal-kind__container">
              <div class="meal-kind__name">
                {{mealsByMealKind.mealKind.name}}
              </div>
              @for (meal of mealsByMealKind.meals; track meal) {
                <app-meal-card 
                [meal]="meal"
                [showActions]="false">
                </app-meal-card>
              }
            </div>
          }
          @if (!mealsByMealKinds.length) {
            <app-simple-empty></app-simple-empty>
          }
      } @else {
        <app-simple-loading></app-simple-loading>
      }
    </app-home-category>
    <mat-divider></mat-divider>
    <app-home-category
      categoryName="{{t('myShoppingLists')}}"
      (onSeeAllClicked)="goToDisplayShoppingLists()">
        <div class="shopping-lists__container">
          @defer (when shoppingLists()) {
            @for (shoppingList of shoppingLists(); track shoppingList) {
              <app-shopping-list-card
                [shoppingList]="shoppingList"
                [showActions]="false"
                (click)="goToDisplayShoppingList(shoppingList.id)">
              </app-shopping-list-card>
            }
            @if (!shoppingLists()?.length) {
              <app-simple-empty></app-simple-empty>
            }
          } @placeholder (minimum 1000ms) {
            <app-shopping-list-card-placeholder
            [showActions]="false">
            </app-shopping-list-card-placeholder>
          }
        </div>
    </app-home-category>
  </div>
  <app-tab-bar [selectedIndex]=0></app-tab-bar>
</div>