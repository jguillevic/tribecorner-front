<div class="page">
    <app-go-back-top-bar></app-go-back-top-bar>
    <div class="margin">
        <div class="form m-t-30">
            <form *ngIf="editMealFormData$ | async as editMealFormData; else loadingForm" [formGroup]="editMealFormData.editMealForm">
                <div class="form-inputs">
                    <!--Type.-->
                    <mat-form-field class="form-input">
                        <mat-label>Type de repas</mat-label>
                        <mat-select formControlName="mealKindId">
                            <mat-option *ngFor="let mealKind of editMealFormData.mealKinds" [value]="mealKind.id">
                            {{ mealKind.name }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="editMealFormData.editMealForm.controls['mealKindId'].hasError('required')">
                            Type de repas requis
                        </mat-error>
                    </mat-form-field>
                    <!--Nom.-->
                    <mat-form-field class="form-input">
                        <mat-label>Nom</mat-label>
                        <input matInput type="text" formControlName="name">
                        <mat-error *ngIf="editMealFormData.editMealForm.controls['name'].hasError('maxlength')">
                            Nom trop long (max. {{ this.mealNameMaxLength }} caract√®res)
                        </mat-error>
                        <mat-error *ngIf="editMealFormData.editMealForm.controls['name'].hasError('required')">
                            Nom requis
                        </mat-error>
                    </mat-form-field>
                    <!--Nombre de personnes.-->
                    <mat-form-field class="form-input">
                        <mat-label>Repas pour ?</mat-label>
                        <mat-select formControlName="numberOfPersons">
                            <mat-option *ngFor="let numberOfPersons of numbersOfPersons" [value]="numberOfPersons">
                                {{ numberOfPersons }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="editMealFormData.editMealForm.controls['numberOfPersons'].hasError('required')">
                            Nombre de personnes requis
                        </mat-error>
                    </mat-form-field>
                </div>
            </form>
            <ng-template #loadingForm>
                <app-simple-loading></app-simple-loading>
            </ng-template>
        </div>
    </div>
</div>
